<template name="afFileUpload">
  <input value="{{fileId}}" type="hidden" {{this.atts}}>
  {{#with uploadedFile}}
    {{#if previewTemplate}}
      {{>Template.dynamic template=previewTemplate}}
    {{else}}
      <div>
        {{#if isImage}}
          {{> uploadImageDemo file=this hasBootstrap=hasBootstrap}}
        {{else}}
          {{> uploadFileDemo file=this hasBootstrap=hasBootstrap}}
        {{/if}}
      </div>
      <a data-reset-file href="#" style="display:none">Reset</a>
      <a data-remove-file href="#">Remove</a>
    {{/if}}
  {{else}}
    {{#if uploadTemplate}}
      {{>Template.dynamic template=uploadTemplate data=currentUpload}}
    {{else}}
      {{#with currentUpload}}
        <div class="upload-header">
          <span>Uploading <b>{{file.name}}</b>:</span>
        </div>
	{{#if hasBootstrap}}
	  <div class="progress">
	    <div class="progress-bar" role="progressbar" aria-valuenow="{{getProgress progress.get}}" aria-valuemin="0" aria-valuemax="100" style="width:{{getProgress progress.get}}%">
	      {{getProgress progress.get}}%
	    </div>
	  </div>
	{{else}}
	  <progress value="{{progress.get}}" max="100"></progress>
	  <span class="progress">{{progress.get}}%</span>
        {{/if}}
      {{else}}
        <input data-files-collection-upload class="form-control af-file-upload-capture file" type="file" />
      {{/with}}
	{{/if}}
  {{/with}}
</template>
